@{
    ViewBag.Title = "Scanner Demo";
}

<!DOCTYPE html>
<html>
<head>
    <title>Scanner Demo</title>
    <script src="https://cdn.dynamsoft.com/dwt/15.2/dynamsoft.webtwain.min.js"></script>
    <script>
     function scanAndUpload() {
         Dynamsoft.WebTwainEnv.Load();

         Dynamsoft.WebTwainEnv.RegisterEvent('OnWebTwainReady', function () {
             var dwObject = Dynamsoft.WebTwainEnv.GetWebTwain('dwtcontrolContainer');
             dwObject.IfShowUI = true;
             dwObject.SelectSource();
             dwObject.OpenSource();
             dwObject.AcquireImage();

             // After acquiring the image, send it to the server
             var imageData = dwObject.GetSelectedImages(0);
             uploadScannedImage(imageData);
         });
     }

     function uploadScannedImage(imageData) {
         // Use AJAX or another method to send the image data to the server
         $.ajax({
             url: '@Url.Action("UploadScannedImage", "Home")',
             type: 'POST',
             contentType: 'application/json',
             data: JSON.stringify({ scannedImage: imageData }),
             success: function (response) {
                 console.log('Scanned image uploaded successfully.');
             },
             error: function () {
                 console.log('Error uploading scanned image.');
             }
         });
     }
    </script>

</head>
<body>
    <button onclick="scanAndUpload()">Scan and Upload</button>

   
    <div id="dwtcontrolContainer"></div>
</body>
</html>
